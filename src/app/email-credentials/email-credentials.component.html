<div class="credentials-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1>Credentials for MyLINK Email - ID-661245</h1>
    <button class="generate-btn" (click)="generateCredentials()">
      Generate credentials
    </button>
  </div>

  <!-- Info Section -->
  <div class="info-section">
    <p class="info-text">
      These credentials are used for accessing the MyLINK Email and the SMTP connection.
      <a href="#" class="smtp-link">SMTP Information</a>
    </p>
  </div>

  <!-- Table Controls -->
  <div class="table-controls">
    <button class="icon-btn" (click)="refreshTable()" title="Refresh">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
        <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
      </svg>
    </button>
    <button class="icon-btn" title="Settings">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
        <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.32z"/>
      </svg>
    </button>
  </div>

  <!-- Credentials Table -->
  <div class="table-wrapper">
    <table class="credentials-table">
      <thead>
        <tr>
          <th>
            Name
            <span class="sort-icons">
              <svg class="sort-icon" width="8" height="8" viewBox="0 0 8 8">
                <path d="M4 0L7 4H1L4 0Z" fill="currentColor"/>
              </svg>
              <svg class="sort-icon" width="8" height="8" viewBox="0 0 8 8">
                <path d="M4 8L1 4H7L4 8Z" fill="currentColor"/>
              </svg>
            </span>
          </th>
          <th>Active</th>
          <th>Client ID</th>
          <th>Client Secret</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let credential of credentials">
          <td>{{ credential.name }}</td>
          <td>
            <label class="switch">
              <input type="checkbox" [checked]="credential.isActive" (change)="toggleActive(credential)">
              <span class="slider"></span>
            </label>
          </td>
          <td>
            <div class="copy-field">
              <span class="client-id">{{ credential.clientId }}</span>
              <button class="copy-btn" (click)="copyToClipboard(credential.clientId)" title="Copy">
                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                </svg>
              </button>
            </div>
          </td>
          <td>
            <div class="secret-field">
              <span class="secret-text">
                {{ credential.showSecret ? credential.clientSecret : '*************' }}
              </span>
              <button class="reset-btn" (click)="resetSecret(credential)">Reset</button>
            </div>
          </td>
          <td>
            <button class="delete-btn" (click)="deleteCredential(credential)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="credentials.length === 0">
    <p>No credentials found. Click "Generate credentials" to create your first credential.</p>
  </div>

  <!-- Footer -->
  <footer class="page-footer">
    <span>©2024 myLINK. All rights reserved. | </span>
    <a href="https://www.linkmobility.com/legal/privacy" target="_blank">Privacy Policy</a>
    <span> | </span>
    <a href="/assets/img/LINK_Acceptable_Use_Policy.pdf" target="_blank">Terms of acceptable use for myLINK</a>
  </footer>
</div>

<!-- Generate Credential Modal -->
<div class="modal-backdrop" *ngIf="showGenerateModal" (click)="closeModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Generate New Credential</h2>
      <button class="close-btn" (click)="closeModal()">×</button>
    </div>
    <div class="modal-body">
      <label for="credential-name">Credential Name</label>
      <input 
        type="text" 
        id="credential-name" 
        [(ngModel)]="newCredentialName" 
        placeholder="Enter credential name"
        class="modal-input">
    </div>
    <div class="modal-footer">
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
      <button class="create-btn" (click)="createCredential()">Create</button>
    </div>
  </div>
</div>