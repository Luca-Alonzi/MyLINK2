<div class="email-credentials-container">
  <div class="header">
    <button class="back-button" (click)="navigateBack()">
      <span class="icon">‚Üê</span> Back
    </button>
    <h1>Email Credentials</h1>
    <button class="add-button" (click)="toggleAddForm()">
      <span class="icon">+</span> Add Email
    </button>
  </div>

  <!-- Add New Credential Form -->
  <div class="form-container" *ngIf="showAddForm">
    <h2>Add New Email Credential</h2>
    <form (ngSubmit)="addCredential()">
      <div class="form-group">
        <label for="email">Email Address</label>
        <input 
          type="email" 
          id="email" 
          [(ngModel)]="newCredential.email" 
          name="email"
          placeholder="user@example.com"
          required>
      </div>
      
      <div class="form-group">
        <label for="provider">Email Provider</label>
        <select 
          id="provider" 
          [(ngModel)]="newCredential.provider" 
          name="provider"
          required>
          <option value="">Select Provider</option>
          <option *ngFor="let provider of providers" [value]="provider">
            {{provider}}
          </option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="username">Username</label>
        <input 
          type="text" 
          id="username" 
          [(ngModel)]="newCredential.username" 
          name="username"
          placeholder="Username"
          required>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="submit-button">Add Credential</button>
        <button type="button" class="cancel-button" (click)="toggleAddForm()">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Edit Credential Form -->
  <div class="form-container" *ngIf="showEditForm && editingCredential">
    <h2>Edit Email Credential</h2>
    <form (ngSubmit)="updateCredential()">
      <div class="form-group">
        <label for="edit-email">Email Address</label>
        <input 
          type="email" 
          id="edit-email" 
          [(ngModel)]="editingCredential.email" 
          name="email"
          required>
      </div>
      
      <div class="form-group">
        <label for="edit-provider">Email Provider</label>
        <select 
          id="edit-provider" 
          [(ngModel)]="editingCredential.provider" 
          name="provider"
          required>
          <option *ngFor="let provider of providers" [value]="provider">
            {{provider}}
          </option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="edit-username">Username</label>
        <input 
          type="text" 
          id="edit-username" 
          [(ngModel)]="editingCredential.username" 
          name="username"
          required>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="submit-button">Update Credential</button>
        <button type="button" class="cancel-button" (click)="cancelEdit()">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Credentials List -->
  <div class="credentials-list">
    <div class="credential-card" *ngFor="let credential of emailCredentials" [class.inactive]="!credential.isActive">
      <div class="credential-header">
        <div class="credential-info">
          <h3>{{credential.email}}</h3>
          <p class="provider">{{credential.provider}}</p>
          <p class="username">Username: {{credential.username}}</p>
        </div>
        <div class="credential-status">
          <span class="status-badge" [class.active]="credential.isActive" [class.inactive]="!credential.isActive">
            {{credential.isActive ? 'Active' : 'Inactive'}}
          </span>
        </div>
      </div>
      
      <div class="credential-footer">
        <p class="last-accessed">Last accessed: {{credential.lastAccessed | date:'medium'}}</p>
        <div class="credential-actions">
          <button class="action-button toggle" (click)="toggleActive(credential)">
            {{credential.isActive ? 'Deactivate' : 'Activate'}}
          </button>
          <button class="action-button edit" (click)="editCredential(credential)">Edit</button>
          <button class="action-button delete" (click)="deleteCredential(credential.id)">Delete</button>
        </div>
      </div>
    </div>
    
    <div class="empty-state" *ngIf="emailCredentials.length === 0">
      <p>No email credentials added yet.</p>
      <button class="add-button" (click)="toggleAddForm()">Add Your First Email</button>
    </div>
  </div>
</div>